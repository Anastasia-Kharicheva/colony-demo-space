kind: application
inputs:
- AZURE_VM_SIZE: Basic_A1
infrastructure:
  connectivity:
    internal:
      - port_info:
          port: 27017
  compute:
    spec:      
      azure:
        vm_size: $AZURE_VM_SIZE
        
configuration:
  start:
    script: mongodb-command.sh
  initialization:
    script: mongodb.sh  # will install mongodb 3.4
  healthcheck:
    script: mongodb-hc.sh
    timeout: 1000
    
source:
  image:    
    azure_image:
    - urn: Canonical:UbuntuServer:16.04-LTS:latest
      username: adminuser
    docker_image:
    - name: mongo
      tag: 4.0
  os_type: linux
  
spec_version: 1
debugging: 
  connection_protocol: SSH